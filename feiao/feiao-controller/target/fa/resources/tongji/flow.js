!function(){var t=window,e=document,n=t.MeizuLogger=function(){};n.prototype={getType:function(t){var n=("https:"===e.location.protocol?"https://":"http://")+"tongji.meizu.com/flow/",r=[{type:1,fn:"getTongjiMC",url:n+"mc?"},{type:2,fn:"getTongjiJE",url:n+"je?"},{type:3,fn:"getTongjiST",url:n+"st?"}];return t?r[t-1]:r},imgOnload:function(t,e){var n=new Image,r=this.makeUrl(t,e);n.onload=function(t){},n.src=r},request:function(e,n){var r=t.MzJavascriptInterface,o=this.getType(n),i=o.url,a=o.fn,c=this.getQueryJson(e,n);if(!r||r&&r.isMzBrowser)this.imgOnload(i,c);else{var u=t.MzPrivateJavascriptInterface;if(u&&u[a]){var s={data:c};u[a](JSON.stringify(s))}else this.imgOnload(i,c)}},makeUrl:function(t,e){return~t.indexOf("?")||(t+="?"),/\?$/.test(t)||(t+="&"),t+="string"==typeof e?e:this.urlEncodeObj(e)},urlEncodeObj:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n+"="+encodeURIComponent(t[n]));return e.join("&")},getQueryObj:function(t){for(var e,n={},r=t.split("&"),o=0,i=r.length;o<i;o++)n[(e=r[o].split("="))[0]]=e[1];return n},getTextOverFlow:function(t,e){return t.length<=e?t:t.substring(0,e)},jsError:function(){var e=this;t.onerror=function(t,n,r){if("string"==typeof t){for(var o,i,a=[],c=arguments.callee.caller,u=/function (\w*\([^(]*\))/;c;)i=(o=c.toString()).match(u),a.push(i&&i[1]||o),c=c.caller;var s={mg:t,fi:n,li:r,stk:e.getTextOverFlow(a.join(""),50)};e.request(s,2)}}},extendData:function(e){var n=t.MzJavascriptInterface;n&&(n.getUMID&&(e.umid=n.getUMID()),n.getDeviceModel&&(e.mdevice=n.getDeviceModel()),n.getUMID&&(e.flymeid=n.getFlymeUid()));var r=t.performance&&t.performance.timing;return r&&(e.dnst=r.domainLookupEnd-r.domainLookupStart,e.tcpt=r.connectEnd-r.connectStart,e.rest=r.responseEnd-r.responseStart,e.wst=r.responseStart-r.navigationStart,e.domt=r.domComplete-r.domInteractive,e.domrt=r.domContentLoadedEventEnd-r.navigationStart,e.plt=r.loadEventStart-r.navigationStart,e.ldt=(r.loadEventEnd||+new Date)-r.navigationStart),e},topGlobalClick:function(){var t=this;e.body.onclick=function(e){for(var n,r=(e=e||window.event||{}).target||e.srcElement;r;){try{r.getAttribute&&(n=r.getAttribute("data-bh"))}catch(t){r.attributes&&(n=r.attributes["data-bh"])}if(n)break;r=r.parentNode}n&&t.request(n,1)}},getQueryJson:function(n,r){var o={};n&&(n.constructor===String?~n.indexOf("=")?o=this.getQueryObj(n):o.action=n:n.constructor===Object&&(o=n));var i=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{type:"unknown"},a=t.screen.width+"x"+t.screen.height,c=t.MzJavascriptInterface,u={ver:"1.0.7",re:e.referrer,rnd:parseInt(1e7*Math.random()),rc:this.queryString("refcode"),ru:location.href,dp:a,nt:c&&c.getNetworkType?c.getNetworkType():i.type};for(var s in o)u[s]=o[s];return 2===r&&((u=n).ru=location.href),u=this.extendData(u)},queryString:function(t,e){e=(e=e||location.search).split(/&|\?/);var n="";t=String(t).toLowerCase();for(var r=0;r<e.length;r++){var o=e[r].split("=");if(o[0].toLowerCase()===t){n=o[1];break}}return n},getStayTime:function(){function e(){i=!0;var e=+new Date-o;r.request({st:e/1e3},3),t.onbeforeunload=null}function n(){i||e()}var r=this,o=+new Date,i=!1;!function(){i=!1,t.onbeforeunload=n}()},render:function(){this.topGlobalClick(),this.jsError(),this.getStayTime(),t.__mztj&&t.__mztj.unload||this.request(null,1)}};var r=t.meizuLogger=new n;t.MeizuBH=function(t){return r.request(t,1)};var o=function(){r.render()};t.addEventListener?t.addEventListener("load",o):t.attachEvent&&t.attachEvent("onload",o)}();